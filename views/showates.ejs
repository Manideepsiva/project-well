<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 
    - primary meta tags
  -->
  <title>Doclab - home</title>
  <meta name="title" content="Doclab - home">
  <meta name="description" content="This is a madical html template made by codewithsadee">

  <!-- 
    - favicon
  -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Rubik:wght@400;500;700&display=swap"
    rel="stylesheet">

  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="style.css">

  <!-- 
    - preload images
  -->
  <link rel="preload" as="image" href="hero-banner.png">
  <link rel="preload" as="image" href="hero-bg.png">

  <style>
    table {
  display: block;
}

tr, td, tbody, tfoot {
  display: block;
}

thead {
  display: none;
}

tr {
  padding-bottom: 10px;
  border-block: 1px solid black;
}

td {
  padding: 10px 10px 0;
  text-align: center;
}
td:before {
  content: attr(data-title);
  color: #7a91aa;
  text-transform: uppercase;
  font-size: 1.4rem;
  padding-right: 10px;
  display: block;
}

table {
  width: 100%;
}

th {
  text-align: left;
  font-weight: 700;
}

thead th {
  background-color: #202932;
  color: #fff;
  border: 1px solid #202932;
}

tfoot th {
  display: block;
  padding: 10px;
  text-align: center;
  color: #b8c4d2;
}

@media (min-width: 460px) {
  td {
    text-align: left;
  }
  td:before {
    display: inline-block;
    text-align: right;
    width: 140px;
  }

  
}
@media (min-width: 720px) {
  table {
    display: table;
  }

  tr {
    display: table-row;
  }

  td, th {
    display: table-cell;
  }

  tbody {
    display: table-row-group;
  }

  thead {
    display: table-header-group;
  }

  tfoot {
    display: table-footer-group;
  }

  td {
    border: 1px solid #28333f;
  }
  td:before {
    display: none;
  }

  td, th {
    padding: 10px;
  }

  tr:nth-child(2n+2) td {
    background-color: #242e39;
  }

  tfoot th {
    display: table-cell;
  }
}


.paignation{
    display: flex;
    justify-content: center;
    gap: 4px;

        

    }

    .paignation button{
        padding: 10px 20px;
    }
   

    .paignation button:hover{
        background-color: seagreen;
        cursor: pointer;
    }

   .paignation button.active{
    background-color: rosybrown;

    }

    .secondinput{
  display: block;
}

.treatsub{
  display: block;
} 
  




  </style>

</head>

<body id="top">

  <!-- 
    - #PRELOADER
  -->

  <div class="preloader" data-preloader>
    <div class="circle"></div>
  </div>





  <!-- 
    - #HEADER
  -->

  <header class="header" data-header>
    <div class="container">

      <a href="#" class="logo">
        <img src="log02.svg" width="50" height="46" alt="Doclab home">
      </a>

      <nav class="navbar" data-navbar>

        <div class="navbar-top">

          <a href="#" class="logo">
            <img src="log02.svg" width="50" height="46" alt="Doclab home">
          </a>

          <button class="nav-close-btn" aria-label="clsoe menu" data-nav-toggler>
            <ion-icon name="close-outline" aria-hidden="true"></ion-icon>
          </button>

        </div>

        <ul class="navbar-list">

          <li class="navbar-item">
            <a href="/dashboard" class="navbar-link title-md">Home</a>
          </li>

          <li class="navbar-item">
            <a href="/doctor" class="navbar-link title-md">Doctors</a>
          </li>

          <li class="navbar-item">
            <a href="/services" class="navbar-link title-md">Services</a>
          </li>

         

          <li class="navbar-item">
            <a href="/contact" class="navbar-link title-md">Contact</a>
          </li>
          <li class="navbar-item">
            <a href="/logout" class="navbar-link title-md">Log out</a>
          </li>

    
        </ul>

        <ul class="social-list">

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-twitter"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-facebook"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-pinterest"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-instagram"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-youtube"></ion-icon>
            </a>
          </li>

        </ul>

      </nav>

      <button class="nav-open-btn" aria-label="open menu" data-nav-toggler>
        <ion-icon name="menu-outline"></ion-icon>
      </button>

     
      <div class="overlay" data-nav-toggler data-overlay></div>

    </div>
  </header>






  <main>
    <article>

      <!-- 
        - #HERO
      -->

      <section class="section hero" style="background-image: url('hero-bg.png')" aria-label="home">
        <div class="container">

          <div class="hero-content">

            <p class="hero-subtitle has-before" data-reveal="left">Welcome To Doclab</p>

            <h1 class="headline-lg hero-title" data-reveal="left">
              Find Nearest <br>
              Doctor.
            </h1>

            <div class="hero-card" data-reveal="left">

              <p class="title-lg card-text">
                Search doctors. clinics. hospitals. etc.
              </p>
              <br>

              <div class="wrapper">

                
                <div class="input-wrapper title-lg secondinput">
                  <input type="text" id="treatmentInput" name="location" placeholder="Diagnostic test name" class="input-field" name="treatfield" autocomplete="off">

                  <ion-icon name="location"></ion-icon>
                  <div class="suggestions" id="suggestions3">
                  </div>
                </div>

             

              </div>

              
              
            
              <div class = "find">
                
              <div class = "treatsub">
                <button class="btn has-before" id="treatmentSubmitButton" >
                  <ion-icon name="search"></ion-icon>

                  <span class="span title-md">Find Now</span>
                </button>
                </div>

              </div>

              <div class = "feedbackloc"></div>

            </div>

          </div>

          <figure class="hero-banner" data-reveal="right">
            <img src="hero-banner.png" width="590" height="517" loading="eager" alt="hero banner"
              class="w-100">
          </figure>

        </div>
      </section>

      <section class = "resultsdata">
        <div class = "container">
            <div class ="displaydata">
                <table>
                    <thead>
                      <tr>
                        <th>
                            NAME OF HOSPITAL
                        </th>
                        <th>
                            ADDRESS
                        </th>
                        <th>PRICE</th>
                        <th>PHONE NUMBER</th>
                        <th>BOOK AN APPOINTMENT</th>
                      

                      </tr>
                    </thead>
                    <tfoot>
                      <tr>
                        <th colspan='3'>
                          END OF THIS PAGE TABLE
                        </th>
                      </tr>
                    </tfoot>
                    <tbody class = "tabledata">
                      
                    </tbody>
                  </table>
            </div>
            <div class = "feedbackhosp"></div>

            <div class = "paignation">
            

            </div>

        </div>
      </section>







  





  <!-- 
    - #FOOTER
  -->

  <footer class="footer" style="background-image: url('./assets/images/footer-bg.png')">
    <div class="container">

      <div class="section footer-top">

        <div class="footer-brand" data-reveal="bottom">

          <a href="#" class="logo">
            <img src="logo.jpg" width="80" height="40" style="object-fit: fill;" alt="Doclab home">
            <p style="font-style: italic; font-size: larger;">Wellness Nexus</p>

          </a>
          <ul class="contact-list has-after">

            <li class="contact-item">

              <div class="item-icon">
                <ion-icon name="mail-open-outline"></ion-icon>
              </div>

              <div>
                <p>
                  Main Email : <a href="mailto:contact@website.com" class="contact-link">contact@&shy;website.com</a>
                </p>

                <p>
                  Inquiries : <a href="mailto:Info@mail.com" class="contact-link">Info@mail.com</a>
                </p>
              </div>

            </li>

            <li class="contact-item">

              <div class="item-icon">
                <ion-icon name="call-outline"></ion-icon>
              </div>

              <div>
                <p>
                  Office Telephone : <a href="tel:0029129102320" class="contact-link">0029129102320</a>
                </p>

                <p>
                  Mobile : <a href="tel:000232439493" class="contact-link">(+91)987 654 3210</a>
                </p>
              </div>

            </li>

          </ul>

        </div>

        <div class="footer-list" data-reveal="bottom">

          <p class="headline-sm footer-list-title">About Us</p>

          <p class="text">
            Crafted with passion and expertise, our web project seamlessly blends innovation and functionality to deliver an exceptional user experience.
          </p>

          <address class="address">
            <ion-icon name="map-outline"></ion-icon>

            <span class="text">
              IIIT Sricity <br>
              Chittor,Andhra Pradesh 517646
            </span>
          </address>

        </div>

        <ul class="footer-list" data-reveal="bottom">

          <li>
            <p class="headline-sm footer-list-title">Services</p>
          </li>

          <li>
            <a href="#" class="text footer-link">Conditions</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Listing</a>
          </li>

          <li>
            <a href="#" class="text footer-link">How It Works</a>
          </li>

          <li>
            <a href="#" class="text footer-link">What We Offer</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Latest News</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Contact Us</a>
          </li>

        </ul>

        <ul class="footer-list" data-reveal="bottom">

          <li>
            <p class="headline-sm footer-list-title">Useful Links</p>
          </li>

          <li>
            <a href="#" class="text footer-link">Conditions</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Terms of Use</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Our Services</a>
          </li>

          <li>
            <a href="#" class="text footer-link">Join as a Doctor</a>
          </li>

          <li>
            <a href="#" class="text footer-link">New Guests List</a>
          </li>

          <li>
            <a href="#" class="text footer-link">The Team List</a>
          </li>

        </ul>

        <div class="footer-list" data-reveal="bottom">

          <p class="headline-sm footer-list-title">Subscribe</p>

          <form action="" class="footer-form">
            <input type="email" name="email" placeholder="Email" class="input-field title-lg">

            <button type="submit" class="btn has-before title-md">Subscribe</button>
          </form>

          <p class="text">
            Get the latest updates via email. Any time you may unsubscribe
          </p>

        </div>

      </div>

      <div class="footer-bottom">

        <p class="text copyright">
          &copy; Wellness Nexus 2024 | All Rights Reserved by Wellness Nexus
        </p>

        <ul class="social-list">

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-facebook"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-twitter"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-google"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-linkedin"></ion-icon>
            </a>
          </li>

          <li>
            <a href="#" class="social-link">
              <ion-icon name="logo-pinterest"></ion-icon>
            </a>
          </li>

        </ul>

      </div>

    </div>
  </footer>





  <!-- 
    - #BACK TO TOP
  -->

  <a href="#top" class="back-top-btn" aria-label="back to top" data-back-top-btn>
    <ion-icon name="chevron-up"></ion-icon>
  </a>

  <script src="script.js"></script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
<script>

function getQueryParam(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
}

let currentpage = 1;
    let totalpages;
    let rowsperpage = 20;
    let data;

    let lastpagerows;


function getdata(){
    console.log("one timeo= only");
        var treatinput =  getQueryParam('treate').toLowerCase();
        var statekey = getQueryParam('State').toUpperCase();
         var districtkey = getQueryParam('District').toUpperCase();
         $.ajax({
            type:"GET",
            url:"http://localhost:3000/dashboard/getrates",
            data :{State:statekey,District:districtkey,treate:treatinput},
            success:function(hosdata){
                if(hosdata.length>0){
            
                data = hosdata;
     
                lastpagerows = (hosdata.length)%rowsperpage;
                totalpages = Math.ceil(hosdata.length/rowsperpage);
                rendertable();
                renderpaignation();
                }

                else $(".feedbackhosp").html('no hospitals were found').show();
                   

                

            },
            error:function(){
                console.log('something went wrong')
            },
            fail:function(){
                console.log("failed to fetch data");
            }


         })


        
    }

$(document).ready(function(){
    var inputname = getQueryParam('treate').toLowerCase();
    $('#myInput').val('Hello, world!');
    getdata();

})







function rendertable(){
          console.log(data[0]);
        let startindex = (currentpage -1)*rowsperpage;
        let endindex = startindex+rowsperpage;
        var treatinput = getQueryParam('treate').toLowerCase();;
        if(currentpage == totalpages) endindex = startindex+ lastpagerows;
        var con = '';
        for(var i = startindex;i<endindex;i++){
            console.log(data.length);
            console.log('heelo there',currentpage);
                
                    con = con + `
                    <tr  >
                        <td data-title = "NAME OF HOSPITAL">${data[i]["Name of Hospital"]}</td>
                        <td data-title = "ADDRESS" >${data[i]["Address"]}</td>
                        <td data-title = "PRICE"  >${data[i][treatinput]}</td>
                        <td data-title = "PHONE NUMBER" >${data[i]["Mitra Contact No"]}</td>
                        <td data-title = "BOOK AN APPOINTMENT"><a href="dashboard/appointment?treat=${treatinput}&hosid=${data[i]["_id"]}" class="btn has-before title-md">BOOK</a></td>

                    </tr>`;


              
        }
        $('.tabledata').html(con);
        revealElements = document.querySelectorAll("[data-reveal]");
    }

    function renderpaignation(){
        $(".paignation").html('');
           let startpage = Math.max(1, currentpage - 2);
            let endpage = Math.min(totalpages, startpage + 4);
            if(startpage>1){
                console.log('hello therer in paigna')

                
                let  newButton = $('<button>', {
                    type:'button',
                    text: 'prev',
                    class: 'btn',
 
                      
                    click: function() {
                        currentpage = currentpage-1;
                    rendertable();
                    renderpaignation();
                       }
                    });




                
                $(".paignation").append(newButton);


            }

            for(let i = startpage;i<=endpage;i++){

                console.log('hello therer in paigna middle')
                let newButton = $('<button>', {
                    type:'button',
                    text: i,
                    class: 'btn',
 
                      
                    click: function(e) {
                        let value = parseInt($(this).text());
                        
                        currentpage = value;
                    rendertable();
                    renderpaignation();
                       }
                    });

                if(i == currentpage) newButton.addClass('active');
                $(".paignation").append(newButton);
              }

              if(endpage<totalpages){

                let newButton = $('<button>', {
                    type:'button',
                    text: 'next',
                    class: 'btn',
 
                      
                    click: function() {
                    currentpage = currentpage+1;
                    rendertable();
                    renderpaignation();
                       }
                    });

                
                $(".paignation").append(newButton);


              }

    }


    $('#treatmentInput').on('input',function(e){

var keyword = $(this).val();
      console.log(keyword);
      if(keyword.length>0){
      $.ajax({
        type:"GET",
        url:"http://localhost:3000/testnames",
        data:{ testname : keyword},
        success:function(data){
            var string = "";
            var totallen = 5;
            if(data['state'].length>totallen) totallen = totallen;
            else totallen = data['state'].length;
           for(var i = 0;i<totallen;i++){
               string = string +`<div class = "suggestion">${data['state'][i]}</div>`

           }
           if(string === "") $('.suggestions').hide();
           else
           $('#suggestions3').html(string).show();
            
        },
        error:function()
        {  console.log('hello there');
            $('#suggestions3').html("sorry we havent there yet").show();

        },
        fail:function(){
            console.log('im sorry');
        }
      });
    }
    else  $('#suggestions3').hide();

});


$('#treatmentInput').on('input',function(e){

var keyword = $(this).val();
      console.log(keyword);
      if(keyword.length>0){
      $.ajax({
        type:"GET",
        url:"http://localhost:3000/testnames",
        data:{ testname : keyword},
        success:function(data){
            var string = "";
            var totallen = 5;
            if(data['state'].length>totallen) totallen = totallen;
            else totallen = data['state'].length;
           for(var i = 0;i<totallen;i++){
               string = string +`<div class = "suggestion">${data['state'][i]}</div>`

           }
           if(string === "") $('.suggestions').hide();
           else
           $('#suggestions3').html(string).show();
            
        },
        error:function()
        {  console.log('hello there');
            $('#suggestions3').html("sorry we havent there yet").show();

        },
        fail:function(){
            console.log('im sorry');
        }
      });
    }
    else  $('#suggestions3').hide();

});



function updateparam(param, value) {
    const urlParams = new URLSearchParams(window.location.search);
    urlParams.set(param, value);
    window.history.replaceState({}, '', window.location.pathname + '?' + urlParams.toString());
}


$('#treatmentSubmitButton').on('click',function(){
    updateparam('treate', $('#treatmentInput').val() );
     currentpage = 1;
     totalpages;
     rowsperpage = 20;
    

     lastpagerows;
    getdata();
    
});

$("#suggestions3").on('click',function(e){
        var result = e.target;
        var string = result.textContent; 
        $("#treatmentInput").val(string);
        $('.suggestions').hide();

    });
    

    
</script>
</body>
</html>